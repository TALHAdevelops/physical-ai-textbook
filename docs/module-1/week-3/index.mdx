---
sidebar_position: 1
sidebar_label: 'ROS 2 Architecture'
---

import LearningObjective from '@site/src/components/LearningObjective';
import KeyConcept from '@site/src/components/KeyConcept';

# Week 3: ROS 2 Architecture and Core Concepts

<LearningObjective>
  Understand the fundamental architecture of ROS 2, its core concepts, and how it differs from ROS 1.
</LearningObjective>

## Introduction to ROS 2

The Robot Operating System (ROS) provides a flexible framework for writing robot software. ROS 2 is the successor to ROS 1, designed to address challenges in modern robotics such as real-time control, multi-robot systems, and embedded platforms.

### Key Differences from ROS 1

| Feature            | ROS 1                                   | ROS 2                                            |
|--------------------|-----------------------------------------|--------------------------------------------------|
| **Communication**  | ROS Master (centralized)                | DDS (Data Distribution Service) (decentralized)  |
| **Real-time**      | Best-effort                             | Real-time capabilities (with RTOS)               |
| **Security**       | Limited                                 | DDS-based security features                      |
| **Multi-robot**    | Challenging                             | Built-in support                                 |
| **Platforms**      | Linux-centric                           | Linux, Windows, macOS, RTOS                      |

## Core Concepts of ROS 2

ROS 2 organizes robot applications into a graph of nodes, which communicate with each other using various mechanisms.

### 1. Nodes

*   **Definition**: An executable process that performs computation (e.g., a camera driver, a motor controller, a path planner).
*   **Encapsulation**: Each node should ideally be responsible for a single, modular task.
*   **Example**: A `camera_publisher` node and an `image_processor` node.

#### Simple ROS 2 Node Example

```python
import rclpy
from rclpy.node import Node

def main(args=None):
    rclpy.init(args=args) # Initialize ROS 2
    node = Node('my_simple_node') # Create a node with the name 'my_simple_node'
    node.get_logger().info('Hello from my_simple_node!') # Log a message
    rclpy.spin_once(node) # Spin the node once to process callbacks (e.g., logging)
    node.destroy_node() # Destroy the node
    rclpy.shutdown() # Shut down ROS 2

if __name__ == '__main__':
    main()
```

### 2. Topics

*   **Definition**: A named bus over which nodes exchange messages asynchronously using a publish/subscribe model.
*   **Mechanism**: A publisher node sends messages to a topic, and one or more subscriber nodes receive messages from that topic.
*   **Data Type**: Messages have a specific type (e.g., `std_msgs/String`, `sensor_msgs/Image`).
*   **Example**: A `sensor_node` publishes `sensor_msgs/Range` messages on the `/range_data` topic. A `navigation_node` subscribes to `/range_data`.

### 3. Services

*   **Definition**: A communication mechanism for synchronous request/reply interactions between nodes.
*   **Mechanism**: A client node sends a request to a service, and a service provider node executes the request and sends back a response.
*   **Data Type**: Services define a request type and a response type.
*   **Example**: A `manipulator_control` node offers a `/set_gripper_position` service. A `task_manager` node calls this service to control the gripper.

### 4. Actions

*   **Definition**: A long-running, goal-oriented communication mechanism for asynchronous requests that provide feedback during execution.
*   **Mechanism**: An action client sends a goal to an action server, which provides feedback as it works towards the goal and eventually sends a result.
*   **Components**: Goal, Feedback, Result.
*   **Example**: A `navigation_client` sends a goal to a `navigation_server` (action server) to move to a target pose. The server provides feedback on current progress and a final result (success/failure).

<KeyConcept title="DDS (Data Distribution Service)">
  The underlying communication layer in ROS 2. It's a middleware standard that enables real-time, peer-to-peer, and reliable message exchange without a central broker, supporting features like Quality of Service (QoS) policies.
</KeyConcept>

## ROS 2 Workspace and Packages

ROS 2 projects are organized into workspaces, which contain multiple packages.

*   **Workspace**: A directory containing ROS 2 packages.
*   **Package**: A directory containing source code, build files, launch files, and other resources related to a specific ROS 2 component.
*   **`colcon build`**: The build tool used in ROS 2 workspaces to compile packages.

## Next Steps

In Week 4, we will dive deeper into implementing nodes, publishers, and subscribers, and interacting with services and actions using Python.
